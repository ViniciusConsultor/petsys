CREATE TABLE ETQ_GRPPRODUTO (
	ID					BIGINT			NOT NULL,
	NOME				VARCHAR(30)		NOT NULL,
	PRCCOMISSAO			FLOAT				NULL
)
;

ALTER TABLE ETQ_GRPPRODUTO
	ADD CONSTRAINT PK_ETQ_GRPPRODUTO
	PRIMARY KEY(ID)
;

CREATE INDEX IDX_ETQ_GRPPRODUTO1
	ON ETQ_GRPPRODUTO(NOME)
;

CREATE TABLE ETQ_MARCAPRODUTO (
	ID					BIGINT			NOT NULL,
	NOME				VARCHAR(30)		NOT NULL
)
;

ALTER TABLE ETQ_MARCAPRODUTO
	ADD CONSTRAINT PK_ETQ_MARCAPRODUTO
	PRIMARY KEY(ID)
;

CREATE INDEX IDX_ETQ_MARCAPRODUTO1
	ON ETQ_MARCAPRODUTO(NOME)
;

CREATE TABLE ETQ_PRODUTO (
	ID					BIGINT			NOT NULL,
	CODIGOBARRAS		VARCHAR(255)		NULL,
	NOME				VARCHAR(50)		NOT NULL,
	UNIDADE				VARCHAR(3)			NULL,
	IDMARCA				BIGINT				NULL,
	QTDMINESTOQUE		FLOAT				NULL,
	VALORDECUSTO		FLOAT				NULL,
	VALORVENDAMIN		FLOAT				NULL,
	PORCLUCRO			FLOAT				NULL,
	IDGRPPROD			BIGINT			NOT NULL,
	OBSERVACOES			VARCHAR(255)		NULL
)
;

ALTER TABLE ETQ_PRODUTO
	ADD CONSTRAINT PK_ETQ_PRODUTO
	PRIMARY KEY(ID)
;

ALTER TABLE ETQ_PRODUTO
	ADD CONSTRAINT FK_ETQ_PRODUTO1
	FOREIGN KEY(IDMARCA)
	REFERENCES ETQ_MARCAPRODUTO(ID)
;

ALTER TABLE ETQ_PRODUTO
	ADD CONSTRAINT FK_ETQ_PRODUTO2
	FOREIGN KEY(IDGRPPROD)
	REFERENCES ETQ_GRPPRODUTO(ID)
;

CREATE INDEX IDX_ETQ_PRODUTO1
	ON ETQ_PRODUTO(NOME)
;

CREATE INDEX IDX_ETQ_PRODUTO2
	ON ETQ_PRODUTO(CODIGOBARRAS)
;

CREATE TABLE ETQ_MOVPRODUTO (
	ID					BIGINT			NOT NULL,
	DATA				INT				NOT NULL,
	HISTORICO			VARCHAR(4000)		NULL,
	NUMERODOCUMENTO		VARCHAR(255)		NULL,
	TIPO				CHAR(1)			NOT NULL
)
;

ALTER TABLE ETQ_MOVPRODUTO
	ADD CONSTRAINT PK_ETQ_MOVPRODUTO
	PRIMARY KEY(ID)
;

CREATE INDEX IDX_ETQ_MOVPRODUTO1
	ON ETQ_MOVPRODUTO(DATA)
;

CREATE INDEX IDX_ETQ_MOVPRODUTO2
	ON ETQ_MOVPRODUTO(TIPO)
;

CREATE TABLE ETQ_PRODUTOMOV (
	IDMOVIMENTACAO		BIGINT			NOT NULL,
	IDPRODUTO			BIGINT			NOT NULL,
	INDICE				INT				NOT NULL,
	QUANTIDADE			FLOAT			NOT NULL,
	PRECO				FLOAT			NOT NULL
)
;

ALTER TABLE ETQ_PRODUTOMOV
	ADD CONSTRAINT PK_ETQ_PRODUTOMOV
	PRIMARY KEY(IDMOVIMENTACAO, IDPRODUTO, INDICE)
;

ALTER TABLE ETQ_PRODUTOMOV
	ADD CONSTRAINT FK_ETQ_PRODUTOMOV1
	FOREIGN KEY(IDMOVIMENTACAO)
	REFERENCES ETQ_MOVPRODUTO(ID)
;

ALTER TABLE ETQ_PRODUTOMOV
	ADD CONSTRAINT FK_ETQ_PRODUTOMOV2
	FOREIGN KEY(IDPRODUTO)
	REFERENCES ETQ_PRODUTO(ID)
;

CREATE TABLE ETQ_PRODUTOMOV (
	IDMOVIMENTACAO		BIGINT			NOT NULL,
	IDPRODUTO			BIGINT			NOT NULL,
	INDICE				INT				NOT NULL,
	QUANTIDADE			FLOAT			NOT NULL,
	PRECO				FLOAT			NOT NULL
)
;

CREATE TABLE ETQ_MOVPRODENTRADA (
	IDMOVIMENTACAO		BIGINT			NOT NULL,
	IDFORNECEDOR		BIGINT				NULL
)
;

ALTER TABLE ETQ_MOVPRODENTRADA
	ADD CONSTRAINT PK_ETQ_MOVPRODENTRADA
	PRIMARY KEY(IDMOVIMENTACAO)
;

ALTER TABLE ETQ_MOVPRODENTRADA
	ADD CONSTRAINT FK_ETQ_MOVPRODENTRADA1
	FOREIGN KEY(IDMOVIMENTACAO)
	REFERENCES ETQ_MOVPRODUTO(ID)
;

ALTER TABLE ETQ_MOVPRODENTRADA
	ADD CONSTRAINT FK_ETQ_MOVPRODENTRADA2
	FOREIGN KEY(IDFORNECEDOR)
	REFERENCES NCL_FORNECEDOR(IDPESSOA)
;
